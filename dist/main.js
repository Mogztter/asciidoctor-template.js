/* Generated by Opal 0.11.0.rc1 */
Opal.modules["asciidoctor/core_ext/factory"] = function(Opal) {
  function $rb_minus(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);
  }
  var self = Opal.top, $nesting = [], nil = Opal.nil, $breaker = Opal.breaker, $slice = Opal.slice, $module = Opal.module, $klass = Opal.klass, $truthy = Opal.truthy, $send = Opal.send, $hash2 = Opal.hash2;

  Opal.add_stubs(['$resolve', '$is_a?', '$new', '$===', '$require', '$to_s', '$==', '$exist?', '$key?', '$[]=', '$-', '$[]']);
  return (function($base, $parent_nesting) {
    var $Asciidoctor, self = $Asciidoctor = $module($base, 'Asciidoctor');

    var def = self.$$proto, $nesting = [self].concat($parent_nesting);

    (function($base, $parent_nesting) {
      var $Converter, self = $Converter = $module($base, 'Converter');

      var def = self.$$proto, $nesting = [self].concat($parent_nesting);

      (function($base, $super, $parent_nesting) {
        function $Factory(){};
        var self = $Factory = $klass($base, $super, 'Factory', $Factory);

        var def = self.$$proto, $nesting = [self].concat($parent_nesting), TMP_Factory_create_1;

        return (Opal.defn(self, '$create', TMP_Factory_create_1 = function $$create(backend, opts) {
          var $a, $b, $c, $d, $e, $f, $g, $h, $i, $j, $k, $l, $m, $n, $o, $p, $q, $r, self = this, converter = nil, base_converter = nil, $case = nil, revealjs_templates_path = nil, $writer = nil, template_converter = nil;

          if (opts == null) {
            opts = $hash2([], {});
          }
          
          if ($truthy((converter = self.$resolve(backend)))) {
            if ($truthy(converter['$is_a?'](Opal.const_get_qualified('::', 'Class')))) {
              return converter.$new(backend, opts)
              } else {
              return converter
            }};
          base_converter = (function() {$case = backend;
          if ("html5"['$===']($case)) {
          if ($truthy((($c = Opal.const_get_qualified('::', 'Asciidoctor', 'skip_raise')) && ($b = Opal.const_get_qualified($c, 'Converter', 'skip_raise')) && ($a = Opal.const_get_qualified($b, 'Html5Converter', 'skip_raise')) ? 'constant' : nil))) {
            } else {
            self.$require("asciidoctor/converter/html5".$to_s())
          };
          return Opal.const_get_relative($nesting, 'Html5Converter').$new(backend, opts);}
          else if ("docbook5"['$===']($case)) {
          if ($truthy((($f = Opal.const_get_qualified('::', 'Asciidoctor', 'skip_raise')) && ($e = Opal.const_get_qualified($f, 'Converter', 'skip_raise')) && ($d = Opal.const_get_qualified($e, 'DocBook5Converter', 'skip_raise')) ? 'constant' : nil))) {
            } else {
            self.$require("asciidoctor/converter/docbook5".$to_s())
          };
          return Opal.const_get_relative($nesting, 'DocBook5Converter').$new(backend, opts);}
          else if ("docbook45"['$===']($case)) {
          if ($truthy((($i = Opal.const_get_qualified('::', 'Asciidoctor', 'skip_raise')) && ($h = Opal.const_get_qualified($i, 'Converter', 'skip_raise')) && ($g = Opal.const_get_qualified($h, 'DocBook45Converter', 'skip_raise')) ? 'constant' : nil))) {
            } else {
            self.$require("asciidoctor/converter/docbook45".$to_s())
          };
          return Opal.const_get_relative($nesting, 'DocBook45Converter').$new(backend, opts);}
          else if ("manpage"['$===']($case)) {
          if ($truthy((($l = Opal.const_get_qualified('::', 'Asciidoctor', 'skip_raise')) && ($k = Opal.const_get_qualified($l, 'Converter', 'skip_raise')) && ($j = Opal.const_get_qualified($k, 'ManPageConverter', 'skip_raise')) ? 'constant' : nil))) {
            } else {
            self.$require("asciidoctor/converter/manpage".$to_s())
          };
          return Opal.const_get_relative($nesting, 'ManPageConverter').$new(backend, opts);}
          else { return nil }})();
          if ($truthy((($m = backend['$==']("revealjs")) ? ($truthy($n = Opal.const_get_relative($nesting, 'JAVASCRIPT_PLATFORM')['$==']("node")) ? $n : Opal.const_get_relative($nesting, 'JAVASCRIPT_PLATFORM')['$==']("node-electron")) : backend['$==']("revealjs")))) {
            if ($truthy(Opal.const_get_qualified('::', 'File')['$exist?']((revealjs_templates_path = "node_modules/asciidoctor-reveal.js/templates")))) {
              if ($truthy(opts['$key?']("template_dirs"))) {
                } else {
                
                $writer = ["template_dirs", revealjs_templates_path];
                $send(opts, '[]=', Opal.to_a($writer));
                $writer[$rb_minus($writer["length"], 1)];
              }}};
          if ($truthy(opts['$key?']("template_dirs"))) {
            } else {
            return base_converter
          };
          if ($truthy((($o = Opal.const_get_qualified('::', 'Asciidoctor', 'skip_raise')) && ($n = Opal.const_get_qualified($o, 'Converter', 'skip_raise')) && ($m = Opal.const_get_qualified($n, 'TemplateConverter', 'skip_raise')) ? 'constant' : nil))) {
            } else {
            self.$require("asciidoctor/converter/template".$to_s())
          };
          if ($truthy((($r = Opal.const_get_qualified('::', 'Asciidoctor', 'skip_raise')) && ($q = Opal.const_get_qualified($r, 'Converter', 'skip_raise')) && ($p = Opal.const_get_qualified($q, 'CompositeConverter', 'skip_raise')) ? 'constant' : nil))) {
            } else {
            self.$require("asciidoctor/converter/composite".$to_s())
          };
          template_converter = Opal.const_get_relative($nesting, 'TemplateConverter').$new(backend, opts['$[]']("template_dirs"), opts);
          return Opal.const_get_relative($nesting, 'CompositeConverter').$new(backend, template_converter, base_converter);
        }, TMP_Factory_create_1.$$arity = -2), nil) && 'create'
      })($nesting[0], null, $nesting)
    })($nesting[0], $nesting)
  })($nesting[0], $nesting)
};

/* Generated by Opal 0.11.0.rc1 */
Opal.modules["asciidoctor/core_ext/template"] = function(Opal) {
  function $rb_plus(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);
  }
  var self = Opal.top, $nesting = [], nil = Opal.nil, $breaker = Opal.breaker, $slice = Opal.slice, $module = Opal.module, $klass = Opal.klass, $truthy = Opal.truthy, $hash2 = Opal.hash2, $send = Opal.send;

  Opal.add_stubs(['$kind_of?', '$resolve_template', '$!', '$nil?', '$new', '$each', '$join', '$+', '$try_read', '$read', '$node_name', '$raise']);
  return (function($base, $parent_nesting) {
    var $Asciidoctor, self = $Asciidoctor = $module($base, 'Asciidoctor');

    var def = self.$$proto, $nesting = [self].concat($parent_nesting);

    (function($base, $super, $parent_nesting) {
      function $TemplateConverter(){};
      var self = $TemplateConverter = $klass($base, $super, 'TemplateConverter', $TemplateConverter);

      var def = self.$$proto, $nesting = [self].concat($parent_nesting), TMP_TemplateConverter_initialize_1, TMP_TemplateConverter_handles$q_2, TMP_TemplateConverter_resolve_template_4, TMP_TemplateConverter_try_read_5, TMP_TemplateConverter_convert_6;

      def.backend = def.engine = def.template_dirs = nil;
      
      
      Opal.defn(self, '$initialize', TMP_TemplateConverter_initialize_1 = function $$initialize(backend, template_dirs, opts) {
        var self = this;

        if (opts == null) {
          opts = $hash2([], {});
        }
        
        self.backend = backend;
        self.engine = "jade";
        if ($truthy(template_dirs['$kind_of?'](Opal.const_get_relative($nesting, 'String')))) {
          return (self.template_dirs = [template_dirs])
          } else {
          return (self.template_dirs = template_dirs)
        };
      }, TMP_TemplateConverter_initialize_1.$$arity = -3);
      
      Opal.defn(self, '$handles?', TMP_TemplateConverter_handles$q_2 = function(name) {
        var $a, $b, self = this, template = nil, content = nil;

        
        $b = self.$resolve_template(name), $a = Opal.to_ary($b), (template = ($a[0] == null ? nil : $a[0])), (content = ($a[1] == null ? nil : $a[1])), $b;
        return template['$nil?']()['$!']();
      }, TMP_TemplateConverter_handles$q_2.$$arity = 1);
      
      Opal.defn(self, '$resolve_template', TMP_TemplateConverter_resolve_template_4 = function $$resolve_template(name) {try {

        var TMP_3, self = this, path_resolver = nil, backend = nil, engine = nil;

        
        path_resolver = Opal.const_get_relative($nesting, 'PathResolver').$new();
        backend = self.backend;
        engine = self.engine;
        $send(self.template_dirs, 'each', [], (TMP_3 = function(template_dir){var self = TMP_3.$$s || this, engine_dir = nil, template = nil, content = nil;
if (template_dir == null) template_dir = nil;
        
          if ($truthy(engine)) {
            
            engine_dir = Opal.const_get_qualified('::', 'File').$join(template_dir, engine);
            template = Opal.const_get_qualified('::', 'File').$join(engine_dir, $rb_plus($rb_plus(name, "."), engine));
            if ($truthy((content = self.$try_read(template)))) {
              Opal.ret([template, content])};};
          template = Opal.const_get_qualified('::', 'File').$join(template_dir, $rb_plus($rb_plus(name, "."), engine));
          if ($truthy((content = self.$try_read(template)))) {
            Opal.ret([template, content])
            } else {
            return nil
          };}, TMP_3.$$s = self, TMP_3.$$arity = 1, TMP_3));
        return [nil, nil];
        } catch ($returner) { if ($returner === Opal.returner) { return $returner.$v } throw $returner; }
      }, TMP_TemplateConverter_resolve_template_4.$$arity = 1);
      
      Opal.defn(self, '$try_read', TMP_TemplateConverter_try_read_5 = function $$try_read(name) {
        var self = this;

        try {
          return Opal.const_get_qualified('::', 'File').$read(name)
        } catch ($err) {
          if (Opal.rescue($err, [Opal.const_get_relative($nesting, 'IOError')])) {
            try {
              return nil
            } finally { Opal.pop_exception() }
          } else { throw $err; }
        }
      }, TMP_TemplateConverter_try_read_5.$$arity = 1);
      return (Opal.defn(self, '$convert', TMP_TemplateConverter_convert_6 = function $$convert(node, template_name, opts) {
        var $a, $b, self = this, template = nil, content = nil;

        if (template_name == null) {
          template_name = nil;
        }
        if (opts == null) {
          opts = $hash2([], {});
        }
        
        template_name = ($truthy($a = template_name) ? $a : node.$node_name());
        $b = self.$resolve_template(template_name), $a = Opal.to_ary($b), (template = ($a[0] == null ? nil : $a[0])), (content = ($a[1] == null ? nil : $a[1])), $b;
        if ($truthy(content)) {
          } else {
          self.$raise("" + "Could not find a custom template to handle transform: " + (template_name))
        };
        
        if (typeof window !== 'undefined') {
          var jade = jade || window.jade;
        } else if (typeof require !== 'undefined') {
          var jade = jade || require('jade');
        } 
        var compiled = jade.compile(content, {pretty: true, filename: template});
        return compiled({ node: node });
      ;
      }, TMP_TemplateConverter_convert_6.$$arity = -2), nil) && 'convert';
    })(Opal.const_get_relative($nesting, 'Converter'), Opal.const_get_qualified(Opal.const_get_relative($nesting, 'Converter'), 'Base'), $nesting)
  })($nesting[0], $nesting)
};

/* Generated by Opal 0.11.0.rc1 */
(function(Opal) {
  var self = Opal.top, $nesting = [], nil = Opal.nil, $breaker = Opal.breaker, $slice = Opal.slice;

  Opal.add_stubs(['$require']);
  
  self.$require("asciidoctor/core_ext/factory");
  return self.$require("asciidoctor/core_ext/template");
})(Opal);
